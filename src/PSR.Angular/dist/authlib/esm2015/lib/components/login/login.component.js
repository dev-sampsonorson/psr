import { Component, Inject } from '@angular/core';
import { Validators } from '@angular/forms';
import { APP_CONFIG_TOKEN } from '@corelib';
import { debounceTime } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "../../services";
import * as i2 from "@angular/forms";
import * as i3 from "@sharedlib";
import * as i4 from "@angular/router";
export class LoginComponent {
    constructor(auth, fb, validators, alert, router, appConfig) {
        this.auth = auth;
        this.fb = fb;
        this.validators = validators;
        this.alert = alert;
        this.router = router;
        this.appConfig = appConfig;
        this.formIsValid = false;
    }
    ngOnInit() {
        this.createForm();
        this.formStatusSub = this.form.statusChanges
            .pipe(
        /**
         * The Debouncetime emits the last received value
         * from the source observable after a specified amount
         * of time has elapsed without any other value appearing
         * on the source Observable
         */
        debounceTime(100)).subscribe(formStatus => {
            if (formStatus === "INVALID" || formStatus === "PENDING")
                this.formIsValid = false;
            else
                this.formIsValid = true;
        });
    }
    loginEmployee() {
        if (this.form.valid) {
            this.loginSub = this.auth.login(this.form.value).subscribe(response => {
                // console.info('login', response);
                this.form.reset();
                this.alert.success("Login successful", "Welcome to the Personal Skill Rating app. Please rate yourself.");
                this.router.navigate([this.appConfig.navigationPaths.Home]);
            });
        }
        else {
            this.form.markAllAsTouched();
        }
    }
    isInvalid(control, validation = undefined) {
        return (!validation && control.touched && control.invalid) ||
            (validation && control.touched && control.hasError(validation));
    }
    get emailControl() { return this.form.get('email'); }
    get passwordControl() { return this.form.get('password'); }
    createForm() {
        this.form = this.fb.group({
            email: ['john@email.com', [Validators.required, Validators.email]],
            password: ['J0h1n.Pass', [Validators.required, this.validators.passwordPatternValidator()]]
        });
    }
    gotoRegister() {
        this.router.navigate([this.appConfig.navigationPaths.Register]);
    }
    ngOnDestroy() {
        this.loginSub.unsubscribe();
        this.formStatusSub.unsubscribe();
    }
}
LoginComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.11", ngImport: i0, type: LoginComponent, deps: [{ token: i1.AuthService }, { token: i2.FormBuilder }, { token: i1.AuthValidatorsService }, { token: i3.AlertService }, { token: i4.Router }, { token: APP_CONFIG_TOKEN }], target: i0.ɵɵFactoryTarget.Component });
LoginComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.11", type: LoginComponent, selector: "app-login", ngImport: i0, template: "<!-- <div class=\"login\"> -->\r\n<div class=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n    <h2 class=\"psr-form__header\">Sign In</h2>\r\n</div>\r\n<div class=\"psr-form__container\">\r\n    <div class=\"psr-form__group\">\r\n        <form [formGroup]=\"form\" (ngSubmit)=\"loginEmployee()\" class=\"psr-form__form\">\r\n            <div>\r\n                <label class=\"psr-form__label\" for=\"email-address\">Email address</label>\r\n                <input formControlName=\"email\" [class.psr-form__field--error]=\"isInvalid(emailControl)\"\r\n                       id=\"email-address\" name=\"email-address\" type=\"email\" class=\"psr-form__field\"\r\n                       placeholder=\"example@email.com\" autocomplete=\"email\" />\r\n                <p class=\"psr-form__field-error-msg\" *ngIf=\"isInvalid(emailControl, 'required')\">What is your email\r\n                    address?</p>\r\n                <p class=\"psr-form__field-error-msg\" *ngIf=\"isInvalid(emailControl, 'email')\">Invalid email format</p>\r\n            </div>\r\n            <div>\r\n                <label class=\"psr-form__label\" for=\"password\">Password</label>\r\n                <input formControlName=\"password\" [class.psr-form__field--error]=\"isInvalid(passwordControl)\"\r\n                       id=\"password\" name=\"password\" type=\"password\" class=\"psr-form__field\" placeholder=\"\"\r\n                       autocomplete=\"current-password\">\r\n                <p class=\"psr-form__field-error-msg\" *ngIf=\"isInvalid(passwordControl, 'required')\">What is your\r\n                    password?</p>\r\n            </div>\r\n            <div>\r\n                <!-- [disabled]=\"!formIsValid\" -->\r\n                <button class=\"psr-form__button\" type=\"submit\">\r\n                    Sign in\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <p class=\"psr-form__footer\">Don't Have an Account? <a class=\"psr-form__alt-action\" (click)=\"gotoRegister()\">Create\r\n            it.</a></p>\r\n</div>\r\n<!-- </div> -->\r\n", styles: [":host{@apply block min-h-full;@apply flex flex-col justify-center items-center;@apply h-screen px-4 py-12 overflow-y-auto;}:host:after{content:\"\";background-image:url(/assets/bg-login.jpg);background-repeat:no-repeat;background-size:cover;opacity:.2;top:0;left:0;bottom:0;right:0;position:absolute;z-index:-1}\n"], directives: [{ type: i2.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i2.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i2.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i2.FormControlName, selector: "[formControlName]", inputs: ["disabled", "formControlName", "ngModel"], outputs: ["ngModelChange"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.11", ngImport: i0, type: LoginComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'app-login',
                    templateUrl: './login.component.html',
                    styleUrls: ['./login.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.AuthService }, { type: i2.FormBuilder }, { type: i1.AuthValidatorsService }, { type: i3.AlertService }, { type: i4.Router }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [APP_CONFIG_TOKEN]
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXV0aGxpYi9zcmMvbGliL2NvbXBvbmVudHMvbG9naW4vbG9naW4uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXV0aGxpYi9zcmMvbGliL2NvbXBvbmVudHMvbG9naW4vbG9naW4uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBQ3JFLE9BQU8sRUFBdUMsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFakYsT0FBTyxFQUFFLGdCQUFnQixFQUFjLE1BQU0sVUFBVSxDQUFDO0FBR3hELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQzs7Ozs7O0FBUzlDLE1BQU0sT0FBTyxjQUFjO0lBUXZCLFlBQ1ksSUFBaUIsRUFDakIsRUFBZSxFQUNmLFVBQWlDLEVBQ2pDLEtBQW1CLEVBQ25CLE1BQWMsRUFDWSxTQUFxQjtRQUwvQyxTQUFJLEdBQUosSUFBSSxDQUFhO1FBQ2pCLE9BQUUsR0FBRixFQUFFLENBQWE7UUFDZixlQUFVLEdBQVYsVUFBVSxDQUF1QjtRQUNqQyxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQ25CLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDWSxjQUFTLEdBQVQsU0FBUyxDQUFZO1FBWHBELGdCQUFXLEdBQVksS0FBSyxDQUFDO0lBWWhDLENBQUM7SUFFTCxRQUFRO1FBQ0osSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRWxCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhO2FBQ3ZDLElBQUk7UUFDRDs7Ozs7V0FLRztRQUNILFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FDcEIsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUU7WUFDckIsSUFBSSxVQUFVLEtBQUssU0FBUyxJQUFJLFVBQVUsS0FBSyxTQUFTO2dCQUNwRCxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQzs7Z0JBRXpCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELGFBQWE7UUFDVCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2pCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQ2xFLG1DQUFtQztnQkFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQ2Qsa0JBQWtCLEVBQ2xCLGlFQUFpRSxDQUNwRSxDQUFDO2dCQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoRSxDQUFDLENBQUMsQ0FBQztTQUNOO2FBQU07WUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7U0FDaEM7SUFDTCxDQUFDO0lBRUQsU0FBUyxDQUFDLE9BQW9CLEVBQUUsYUFBaUMsU0FBUztRQUN0RSxPQUFPLENBQUMsQ0FBQyxVQUFVLElBQUksT0FBTyxDQUFDLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDO1lBQ3RELENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ3hFLENBQUM7SUFFRCxJQUFJLFlBQVksS0FBSyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBZ0IsQ0FBQyxDQUFDLENBQUM7SUFDcEUsSUFBSSxlQUFlLEtBQUssT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQWdCLENBQUMsQ0FBQyxDQUFDO0lBRTFFLFVBQVU7UUFDTixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDO1lBQ3RCLEtBQUssRUFBRSxDQUFDLGdCQUFnQixFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbEUsUUFBUSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLHdCQUF3QixFQUFFLENBQUMsQ0FBQztTQUM5RixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsWUFBWTtRQUNSLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsV0FBVztRQUNQLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQyxDQUFDOzs0R0EzRVEsY0FBYywrSkFjWCxnQkFBZ0I7Z0dBZG5CLGNBQWMsaURDZjNCLHNpRUFvQ0E7NEZEckJhLGNBQWM7a0JBTDFCLFNBQVM7bUJBQUM7b0JBQ1AsUUFBUSxFQUFFLFdBQVc7b0JBQ3JCLFdBQVcsRUFBRSx3QkFBd0I7b0JBQ3JDLFNBQVMsRUFBRSxDQUFDLHdCQUF3QixDQUFDO2lCQUN4Qzs7MEJBZVEsTUFBTTsyQkFBQyxnQkFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEluamVjdCwgT25EZXN0cm95LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Db250cm9sLCBGb3JtR3JvdXAsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IEFQUF9DT05GSUdfVE9LRU4sIElBcHBDb25maWcgfSBmcm9tICdAY29yZWxpYic7XHJcbmltcG9ydCB7IEFsZXJ0U2VydmljZSB9IGZyb20gJ0BzaGFyZWRsaWInO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgZGVib3VuY2VUaW1lIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5cclxuaW1wb3J0IHsgQXV0aFNlcnZpY2UsIEF1dGhWYWxpZGF0b3JzU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gICAgc2VsZWN0b3I6ICdhcHAtbG9naW4nLFxyXG4gICAgdGVtcGxhdGVVcmw6ICcuL2xvZ2luLmNvbXBvbmVudC5odG1sJyxcclxuICAgIHN0eWxlVXJsczogWycuL2xvZ2luLmNvbXBvbmVudC5zY3NzJ11cclxufSlcclxuZXhwb3J0IGNsYXNzIExvZ2luQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xyXG5cclxuICAgIHB1YmxpYyBmb3JtITogRm9ybUdyb3VwO1xyXG4gICAgcHVibGljIGZvcm1Jc1ZhbGlkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBsb2dpblN1YiE6IFN1YnNjcmlwdGlvbjtcclxuICAgIHByaXZhdGUgZm9ybVN0YXR1c1N1YiE6IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGF1dGg6IEF1dGhTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLFxyXG4gICAgICAgIHByaXZhdGUgdmFsaWRhdG9yczogQXV0aFZhbGlkYXRvcnNTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgYWxlcnQ6IEFsZXJ0U2VydmljZSxcclxuICAgICAgICBwcml2YXRlIHJvdXRlcjogUm91dGVyLFxyXG4gICAgICAgIEBJbmplY3QoQVBQX0NPTkZJR19UT0tFTikgcHJpdmF0ZSBhcHBDb25maWc6IElBcHBDb25maWdcclxuICAgICkgeyB9XHJcblxyXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVGb3JtKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZm9ybVN0YXR1c1N1YiA9IHRoaXMuZm9ybS5zdGF0dXNDaGFuZ2VzXHJcbiAgICAgICAgICAgIC5waXBlKFxyXG4gICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgKiBUaGUgRGVib3VuY2V0aW1lIGVtaXRzIHRoZSBsYXN0IHJlY2VpdmVkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgKiBmcm9tIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBhZnRlciBhIHNwZWNpZmllZCBhbW91bnRcclxuICAgICAgICAgICAgICAgICAqIG9mIHRpbWUgaGFzIGVsYXBzZWQgd2l0aG91dCBhbnkgb3RoZXIgdmFsdWUgYXBwZWFyaW5nXHJcbiAgICAgICAgICAgICAgICAgKiBvbiB0aGUgc291cmNlIE9ic2VydmFibGVcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZGVib3VuY2VUaW1lKDEwMClcclxuICAgICAgICAgICAgKS5zdWJzY3JpYmUoZm9ybVN0YXR1cyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9ybVN0YXR1cyA9PT0gXCJJTlZBTElEXCIgfHwgZm9ybVN0YXR1cyA9PT0gXCJQRU5ESU5HXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtSXNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybUlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsb2dpbkVtcGxveWVlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZvcm0udmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2dpblN1YiA9IHRoaXMuYXV0aC5sb2dpbih0aGlzLmZvcm0udmFsdWUpLnN1YnNjcmliZShyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmluZm8oJ2xvZ2luJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0LnN1Y2Nlc3MoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJMb2dpbiBzdWNjZXNzZnVsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJXZWxjb21lIHRvIHRoZSBQZXJzb25hbCBTa2lsbCBSYXRpbmcgYXBwLiBQbGVhc2UgcmF0ZSB5b3Vyc2VsZi5cIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFt0aGlzLmFwcENvbmZpZy5uYXZpZ2F0aW9uUGF0aHMuSG9tZV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmZvcm0ubWFya0FsbEFzVG91Y2hlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0ludmFsaWQoY29udHJvbDogRm9ybUNvbnRyb2wsIHZhbGlkYXRpb246IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiAoIXZhbGlkYXRpb24gJiYgY29udHJvbC50b3VjaGVkICYmIGNvbnRyb2wuaW52YWxpZCkgfHxcclxuICAgICAgICAgICAgKHZhbGlkYXRpb24gJiYgY29udHJvbC50b3VjaGVkICYmIGNvbnRyb2wuaGFzRXJyb3IodmFsaWRhdGlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBlbWFpbENvbnRyb2woKSB7IHJldHVybiB0aGlzLmZvcm0uZ2V0KCdlbWFpbCcpIGFzIEZvcm1Db250cm9sOyB9XHJcbiAgICBnZXQgcGFzc3dvcmRDb250cm9sKCkgeyByZXR1cm4gdGhpcy5mb3JtLmdldCgncGFzc3dvcmQnKSBhcyBGb3JtQ29udHJvbDsgfVxyXG5cclxuICAgIGNyZWF0ZUZvcm0oKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtID0gdGhpcy5mYi5ncm91cCh7XHJcbiAgICAgICAgICAgIGVtYWlsOiBbJ2pvaG5AZW1haWwuY29tJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMuZW1haWxdXSxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IFsnSjBoMW4uUGFzcycsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCB0aGlzLnZhbGlkYXRvcnMucGFzc3dvcmRQYXR0ZXJuVmFsaWRhdG9yKCldXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdvdG9SZWdpc3RlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbdGhpcy5hcHBDb25maWcubmF2aWdhdGlvblBhdGhzLlJlZ2lzdGVyXSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5sb2dpblN1Yi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIHRoaXMuZm9ybVN0YXR1c1N1Yi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsIjwhLS0gPGRpdiBjbGFzcz1cImxvZ2luXCI+IC0tPlxyXG48ZGl2IGNsYXNzPVwic206bXgtYXV0byBzbTp3LWZ1bGwgc206bWF4LXctbWRcIj5cclxuICAgIDxoMiBjbGFzcz1cInBzci1mb3JtX19oZWFkZXJcIj5TaWduIEluPC9oMj5cclxuPC9kaXY+XHJcbjxkaXYgY2xhc3M9XCJwc3ItZm9ybV9fY29udGFpbmVyXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwicHNyLWZvcm1fX2dyb3VwXCI+XHJcbiAgICAgICAgPGZvcm0gW2Zvcm1Hcm91cF09XCJmb3JtXCIgKG5nU3VibWl0KT1cImxvZ2luRW1wbG95ZWUoKVwiIGNsYXNzPVwicHNyLWZvcm1fX2Zvcm1cIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBzci1mb3JtX19sYWJlbFwiIGZvcj1cImVtYWlsLWFkZHJlc3NcIj5FbWFpbCBhZGRyZXNzPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCBmb3JtQ29udHJvbE5hbWU9XCJlbWFpbFwiIFtjbGFzcy5wc3ItZm9ybV9fZmllbGQtLWVycm9yXT1cImlzSW52YWxpZChlbWFpbENvbnRyb2wpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICBpZD1cImVtYWlsLWFkZHJlc3NcIiBuYW1lPVwiZW1haWwtYWRkcmVzc1wiIHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwicHNyLWZvcm1fX2ZpZWxkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cImV4YW1wbGVAZW1haWwuY29tXCIgYXV0b2NvbXBsZXRlPVwiZW1haWxcIiAvPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJwc3ItZm9ybV9fZmllbGQtZXJyb3ItbXNnXCIgKm5nSWY9XCJpc0ludmFsaWQoZW1haWxDb250cm9sLCAncmVxdWlyZWQnKVwiPldoYXQgaXMgeW91ciBlbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M/PC9wPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJwc3ItZm9ybV9fZmllbGQtZXJyb3ItbXNnXCIgKm5nSWY9XCJpc0ludmFsaWQoZW1haWxDb250cm9sLCAnZW1haWwnKVwiPkludmFsaWQgZW1haWwgZm9ybWF0PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInBzci1mb3JtX19sYWJlbFwiIGZvcj1cInBhc3N3b3JkXCI+UGFzc3dvcmQ8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IGZvcm1Db250cm9sTmFtZT1cInBhc3N3b3JkXCIgW2NsYXNzLnBzci1mb3JtX19maWVsZC0tZXJyb3JdPVwiaXNJbnZhbGlkKHBhc3N3b3JkQ29udHJvbClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgIGlkPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cInBzci1mb3JtX19maWVsZFwiIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJjdXJyZW50LXBhc3N3b3JkXCI+XHJcbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInBzci1mb3JtX19maWVsZC1lcnJvci1tc2dcIiAqbmdJZj1cImlzSW52YWxpZChwYXNzd29yZENvbnRyb2wsICdyZXF1aXJlZCcpXCI+V2hhdCBpcyB5b3VyXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ/PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDwhLS0gW2Rpc2FibGVkXT1cIiFmb3JtSXNWYWxpZFwiIC0tPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBzci1mb3JtX19idXR0b25cIiB0eXBlPVwic3VibWl0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgU2lnbiBpblxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZm9ybT5cclxuICAgIDwvZGl2PlxyXG4gICAgPHAgY2xhc3M9XCJwc3ItZm9ybV9fZm9vdGVyXCI+RG9uJ3QgSGF2ZSBhbiBBY2NvdW50PyA8YSBjbGFzcz1cInBzci1mb3JtX19hbHQtYWN0aW9uXCIgKGNsaWNrKT1cImdvdG9SZWdpc3RlcigpXCI+Q3JlYXRlXHJcbiAgICAgICAgICAgIGl0LjwvYT48L3A+XHJcbjwvZGl2PlxyXG48IS0tIDwvZGl2PiAtLT5cclxuIl19